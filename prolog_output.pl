:- use_module(library(clpfd)).
:- set_prolog_flag(answer_write_options,[max_depth(0)]).
run([X_0_0,X_0_1,X_0_2,X_0_3,X_0_4,X_0_5,X_1_0,X_1_1,X_1_2,X_1_3,X_1_4,X_1_5,X_2_0,X_2_1,X_2_2,X_2_3,X_2_4,X_2_5,X_3_0,X_3_1,X_3_2,X_3_3,X_3_4,X_3_5,X_4_0,X_4_1,X_4_2,X_4_3,X_4_4,X_4_5,X_5_0,X_5_1,X_5_2,X_5_3,X_5_4,X_5_5]) :-
[X_0_0,X_0_1,X_0_2,X_0_3,X_0_4,X_0_5,X_1_0,X_1_1,X_1_2,X_1_3,X_1_4,X_1_5,X_2_0,X_2_1,X_2_2,X_2_3,X_2_4,X_2_5,X_3_0,X_3_1,X_3_2,X_3_3,X_3_4,X_3_5,X_4_0,X_4_1,X_4_2,X_4_3,X_4_4,X_4_5,X_5_0,X_5_1,X_5_2,X_5_3,X_5_4,X_5_5] ins 0..4,
Vs =[0,0,1,2,3,4],
findall(X, permutation(X, Vs), Permed),
tuples_in([[X_0_0,X_0_1,X_0_2,X_0_3,X_0_4,X_0_5]], Permed),
tuples_in([[X_0_0,X_1_0,X_2_0,X_3_0,X_4_0,X_5_0]], Permed),
tuples_in([[X_1_0,X_1_1,X_1_2,X_1_3,X_1_4,X_1_5]], Permed),
tuples_in([[X_0_1,X_1_1,X_2_1,X_3_1,X_4_1,X_5_1]], Permed),
tuples_in([[X_2_0,X_2_1,X_2_2,X_2_3,X_2_4,X_2_5]], Permed),
tuples_in([[X_0_2,X_1_2,X_2_2,X_3_2,X_4_2,X_5_2]], Permed),
tuples_in([[X_3_0,X_3_1,X_3_2,X_3_3,X_3_4,X_3_5]], Permed),
tuples_in([[X_0_3,X_1_3,X_2_3,X_3_3,X_4_3,X_5_3]], Permed),
tuples_in([[X_4_0,X_4_1,X_4_2,X_4_3,X_4_4,X_4_5]], Permed),
tuples_in([[X_0_4,X_1_4,X_2_4,X_3_4,X_4_4,X_5_4]], Permed),
tuples_in([[X_5_0,X_5_1,X_5_2,X_5_3,X_5_4,X_5_5]], Permed),
tuples_in([[X_0_5,X_1_5,X_2_5,X_3_5,X_4_5,X_5_5]], Permed),
X_0_0*X_0_1*X_1_0*X_1_1 #= 0,
X_0_1*X_0_2*X_1_1*X_1_2 #= 0,
X_0_2*X_0_3*X_1_2*X_1_3 #= 0,
X_0_3*X_0_4*X_1_3*X_1_4 #= 0,
X_0_4*X_0_5*X_1_4*X_1_5 #= 0,
X_1_0*X_1_1*X_2_0*X_2_1 #= 0,
X_1_1*X_1_2*X_2_1*X_2_2 #= 0,
X_1_2*X_1_3*X_2_2*X_2_3 #= 0,
X_1_3*X_1_4*X_2_3*X_2_4 #= 0,
X_1_4*X_1_5*X_2_4*X_2_5 #= 0,
X_2_0*X_2_1*X_3_0*X_3_1 #= 0,
X_2_1*X_2_2*X_3_1*X_3_2 #= 0,
X_2_2*X_2_3*X_3_2*X_3_3 #= 0,
X_2_3*X_2_4*X_3_3*X_3_4 #= 0,
X_2_4*X_2_5*X_3_4*X_3_5 #= 0,
X_3_0*X_3_1*X_4_0*X_4_1 #= 0,
X_3_1*X_3_2*X_4_1*X_4_2 #= 0,
X_3_2*X_3_3*X_4_2*X_4_3 #= 0,
X_3_3*X_3_4*X_4_3*X_4_4 #= 0,
X_3_4*X_3_5*X_4_4*X_4_5 #= 0,
X_4_0*X_4_1*X_5_0*X_5_1 #= 0,
X_4_1*X_4_2*X_5_1*X_5_2 #= 0,
X_4_2*X_4_3*X_5_2*X_5_3 #= 0,
X_4_3*X_4_4*X_5_3*X_5_4 #= 0,
X_4_4*X_4_5*X_5_4*X_5_5 #= 0,
X_0_0 #= 2,
X_0_5 #= 1,
X_1_3 #= 2,
X_2_0 #= 4,
X_2_4 #= 3,
X_3_1 #= 3,
X_4_1 #= 1,
X_4_2 #= 2,
X_5_0 #= 3,
X_5_3 #= 1,
labeling(['ff'], [X_0_0,X_0_1,X_0_2,X_0_3,X_0_4,X_0_5,X_1_0,X_1_1,X_1_2,X_1_3,X_1_4,X_1_5,X_2_0,X_2_1,X_2_2,X_2_3,X_2_4,X_2_5,X_3_0,X_3_1,X_3_2,X_3_3,X_3_4,X_3_5,X_4_0,X_4_1,X_4_2,X_4_3,X_4_4,X_4_5,X_5_0,X_5_1,X_5_2,X_5_3,X_5_4,X_5_5]).
solve(X) :- run(X), write_ln(X), fail.
solve(_).
:- solve(_), halt.
